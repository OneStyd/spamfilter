ICMDecompressionSessionDecodeFrame   is not workingHi All   I am stuck in the quicktime API ICMDecompressionSessionDecodeFrame   for a while  and I could not find any other resources or any other sample code  Could any body help me out  and any suggestions appreciated   I want to import a movie file from local drive  get the compressed video frames  decode them  and encapsulate them into our own UncVideoUnit format  Right now we have already got the compressed video frames  but when we are trying to decode them  we have got some problem  Here is our source code  could any body tell me if there is something wrong in our code          initialize callback structure    ICMDecompressionTrackingCallbackRecord callRecord     callRecord decompressionTrackingCallback   WriteFrameToBitmap     callRecord decompressionTrackingRefCon   NULL          add attributes for pixel buffer that comes out    CFMutableDictionaryRef pixelBufferAttributes   NULL     pixelBufferAttributes   CFDictionaryCreateMutable  NULL      kCFTypeDictionaryKeyCallBacks   kCFTypeDictionaryValueCallBacks        OSType format   k  RGBPixelFormat     CFNumberRef pFormat   CFNumberCreate  NULL  kCFNumberSInt  Type   format       CFDictionaryAddValue  pixelBufferAttributes  kCVPixelBufferPixelFormatTypeKey  pFormat       CFRelease  pFormat        int width            CFNumberRef pWidth   CFNumberCreate  NULL  kCFNumberIntType   width       CFDictionaryAddValue  pixelBufferAttributes  kCVPixelBufferWidthKey  pWidth       CFRelease  pWidth        int height           CFNumberRef pHeight   CFNumberCreate  NULL  kCFNumberIntType   height       CFDictionaryAddValue  pixelBufferAttributes  kCVPixelBufferHeightKey  pHeight       CFRelease  pHeight                set up decompression session    ICMDecompressionSessionRef decompressionSession     ImageDescriptionHandle description    ImageDescriptionHandle NewHandleClear sizeof ImageDescription       OSStatus nStatus   ICMDecompressionSessionCreate   NULL  description  NULL  pixelBufferAttributes   callRecord   decompressionSession      CFRelease  pixelBufferAttributes            get video frames from movie files and decode each frame    TimeValue   startTime   GetMediaAdvanceDecodeTime GetTrackMedia track            for starting time of each frame    TimeValue   DurationPerSample            fro duration of each frame    int count         while true           ByteCount size          UInt   aData   new unsigned char maxDataSize       nErr   GetMediaSample  videoMedia  aData  maxDataSize   size  startTime  nil   DurationPerSample  nil  nil  nil     nil  nil         OSStatus nStatus   ICMDecompressionSessionDecodeFrame  decompressionSession   const UInt   aData  size  NULL  NULL   void    count          count        startTime    DurationPerSample       if nErr    noErr       break       delete    aData          Here is the definition for the callback funtion    static void WriteFrameToBitmap     void  decompressionTrackingRefCon     OSStatus result     ICMDecompressionTrackingFlags decompressionTrackingFlags     CVPixelBufferRef pixelBuffer     TimeValue   displayTime     TimeValue   displayDuration     ICMValidTimeFlags validTimeFlags     void  reserved     void  sourceFrameRefCon         when we get decoded frame  print it out to bitmap  if    result    noErr      decompressionTrackingFlags   kICMDecompressionTracking EmittingFrame     pixelBuffer        char num        sprintf s num        d      int   sourceFrameRefCon      std  string strFilePath   std  string  Bitmap      std  string num      boost  shared ptr  pMyImage   StillImage  CreateInstance      size t size   CVPixelBufferGetDataSize pixelBuffer     BYTE  mem buffer    BYTE  malloc size   sizeof BYTE      strcpy  char  mem buffer   char   CVPixelBufferGetBaseAddress pixelBuffer      pMyImage  LoadImage mem buffer  size     pMyImage  SaveImage strFilePath c str    BMP            Thanks very much   Bo Peng Software Engineer Capella Systems  LLC                                                  Do not post admin requests to the list  They will be ignored  QuickTime API mailing list          Help Unsubscribe Update your Subscription     This email sent to mlsubscriber    