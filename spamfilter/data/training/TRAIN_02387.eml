Re  ICMDecompressionSessionDecodeFrame   is not workingHi  You need to fill out the ImageDescription before creating the   decompression session  using eg GetMediaSampleDescription   There is documentation and a couple of ICMDecompressionSession samples   in Xcode   Best of luck   T  On   May       at        Bo Peng wrote     Hi All         I forgot to tell you guys the error code  The returned value of   ICMDecompressionSessionDecodeFrame   function call is always        which means error in user parameter list         I am stuck in the quicktime API ICMDecompressionSessionDecodeFrame     for a while  and I could not find any other resources or any other   sample code  Could any body help me out  and any suggestions   appreciated         I want to import a movie file from local drive  get the compressed   video frames  decode them  and encapsulate them into our own   UncVideoUnit format    Right now we have already got the compressed video frames  but when we   are trying to decode them  we have got some problem  Here is our   source code  could any body tell me if there is something wrong in our   code                 initialize callback structure   ICMDecompressionTrackingCallbackRecord callRecord    callRecord decompressionTrackingCallback   D WriteFrameToBitmap    callRecord decompressionTrackingRefCon   D NULL            add attributes for pixel buffer that comes out   CFMutableDictionaryRef pixelBufferAttributes   D NULL    pixelBufferAttributes   D CFDictionaryCreateMutable  NULL        kCFTypeDictionaryKeyCallBacks   kCFTypeDictionaryValueCallBacks           OSType format   D k  RGBPixelFormat    CFNumberRef pFormat   D CFNumberCreate  NULL  kCFNumberSInt  Type     format      CFDictionaryAddValue  pixelBufferAttributes    kCVPixelBufferPixelFormatTypeKey  pFormat      CFRelease  pFormat           int width   D         CFNumberRef pWidth   D CFNumberCreate  NULL  kCFNumberIntType   width        CFDictionaryAddValue  pixelBufferAttributes  kCVPixelBufferWidthKey    pWidth      CFRelease  pWidth           int height   D        CFNumberRef pHeight   D CFNumberCreate  NULL  kCFNumberIntType     height      CFDictionaryAddValue  pixelBufferAttributes  kCVPixelBufferHeightKey    pHeight      CFRelease  pHeight               set up decompression session   ICMDecompressionSessionRef decompressionSession    ImageDescriptionHandle description   D    ImageDescriptionHandle NewHandleClear sizeof ImageDescription      OSStatus nStatus   D ICMDecompressionSessionCreate   NULL    description    NULL  pixelBufferAttributes   callRecord   decompressionSession     CFRelease  pixelBufferAttributes                   get video frames from movie files and decode each frame   TimeValue   startTime     DGetMediaAdvanceDecodeTime GetTrackMedia track           for   starting   time of each frame   TimeValue   DurationPerSample   D                     fro duration of   each frame   int count   D      while true              ByteCount size   D            UInt   aData   D new unsigned char maxDataSize           nErr   D GetMediaSample  videoMedia  aData  maxDataSize   size    startTime  nil   DurationPerSample  nil  nil  nil     nil  nil                OSStatus nStatus   D ICMDecompressionSessionDecodeFrame    decompressionSession   const UInt   aData  size  NULL  NULL   void      count                 count            startTime    D DurationPerSample               if nErr    D noErr               break                delete    aData                   Here is the definition for the callback funtion         static void WriteFrameToBitmap                          void  decompressionTrackingRefCon                          OSStatus result                          ICMDecompressionTrackingFlags   decompressionTrackingFlags                          CVPixelBufferRef pixelBuffer                          TimeValue   displayTime                          TimeValue   displayDuration                          ICMValidTimeFlags validTimeFlags                          void  reserved                          void  sourceFrameRefCon                  when we get decoded frame  print it out to bitmap         if    result   D  D noErr      decompressionTrackingFlags     kICMDecompressionTracking EmittingFrame     pixelBuffer                             char num                      sprintf s num        d      int   sourceFrameRefCon                    std  string strFilePath   D std  string  Bitmap        std  string num                        boost  shared ptr  pMyImage   D   StillImage  CreateInstance                    size t size   D CVPixelBufferGetDataSize pixelBuffer                   BYTE  mem buffer   D  BYTE  malloc size   sizeof BYTE                    strcpy  char  mem buffer   char     CVPixelBufferGetBaseAddress pixelBuffer                    pMyImage  LoadImage mem buffer  size                   pMyImage  SaveImage strFilePath c str    BMP                                       Thanks very much         Bo Peng   Software Engineer   Capella Systems  LLC                                                     Do not post admin requests to the list  They will be ignored    QuickTime API mailing list            Help Unsubscribe Update your Subscription                This email sent to                                                     Do not post admin requests to the list  They will be ignored  QuickTime API mailing list          Help Unsubscribe Update your Subscription     This email sent to mlsubscriber    