exmh and pgp  support for external passphrase cache   patch i m a very happy user of exmh  but i m paranoid also     therefore i m not too happy with exmh caching my pgp passphrases   usually i use a relatively secure tool called  quintuple agent    URL   to store my passphrases  and i ve just added the few lines of code to exmh which allow for such external caches   the patch is attached  it is against version        debian   and the files modified are extrasInit tcl and pgpExec tcl   i ve added three new preferences in the  general pgp  section  which allow everybody to use his her favourite external tool to get the passphrase  everything which spits out the phrase on stdout is ok    i d be happy if somebody with cvs access thinks that this stuff  is worth to be added and does so  apart from that i m happy for  suggestions  comments or critique  mind you  i m not exactly a special  friend of tcl so my code may leave things to be desired      regards az        usr lib exmh extrasInit tcl Sat Mar                        extrasInit tcl Fri Sep                                             pgp passtimeout  pgpPassTimeout     Minutes to cache PGP passphrase    Exmh will clear its memory of PGP passphrases after  this time period  in minutes  has elapsed       pgp extpass  pgpExtPass OFF  Use external passphrase cache    If this is enabled  then exmh will use an external program to retrieve   your passphrase when needed  pgpKeepPass and pgpPassTimeout will   be ignored      pgp getextcmd  pgpGetExtCmd   usr bin q client get  s   Method to query external passphrase cache    This external program is used to retrieve the passphrase for your key   if pgpExtPass is active  The passphrase is expected on stdout   The key id is substituted with  s  using format        pgp delextcmd  pgpDelExtCmd   usr bin q client delete  s   Method to invalidate external passphrase cache    This external program is used to delete the passphrase for your key  from the external cache  if pgpExtPass is active    The key id is substituted with  s  using format                      Make sure we don t inherit a bad pgp version  from a previous setup      usr lib exmh pgpExec tcl Sat Mar                        pgpExec tcl Fri Sep                                        proc Pgp GetPass   v key          global pgp        if   info exists pgp extpass       set pgp extpass               info exists pgp getextcmd        Exmh Debug  Pgp GetPass  v  key external    set keyid  lindex  key      set cmd  format  pgp getextcmd   keyid    while             Exmh Debug  running cmd  cmd        if   catch  exec sh  c   cmd   result        Exmh Debug  error running cmd   result     Exmh Status  Error executing external cmd  warn    return            else      if   Pgp Exec CheckPassword  v  result  key            return  result      else          Exmh Debug  bad passphrase         if   info exists pgp delextcmd          Exmh Debug  trying to invalidate bad passphrase      if  catch  exec sh  c   format  pgp delextcmd   keyid               Exmh Debug  invalidation failed          return                                           else        Exmh Debug  Pgp GetPass  v  key         if   lsearch  glob  set pgp  v privatekeys     lindex  key                                                              return  password                                   Alexander Zangerl       DSA   BD   D    RSA  B        Kind of like my    K fund   wealth not found      shrox       BEGIN PGP SIGNATURE      Version  GnuPG v       GNU Linux   iD DBQE lFJBpy  bEK ZF RAq  AJwLmyZx zs FgJkmvcMeL  gewE ACbBWj  OYCcSYWXynxRpVtCbDE R A   T T       END PGP SIGNATURE      